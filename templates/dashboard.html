<!DOCTYPE html>
<html lang="en">
    <head>
        <script type="text/javascript">
            const temperature = "{{ data.temperature }}";
            const humidity = "{{ data.humidity }}";
         </script>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>IoT Dashboard</title>
        <script src="{{ url_for('static', filename='js/script.js') }}"></script>
        <script src="{{ url_for('static', filename='js/scriptFan.js') }}"></script>
        <link rel="stylesheet" href="../static/style.css">
    </head>

    <body id="mainbody">
        <div id="background_container">
        <div id="container_prefernces">
            <h1 class="generalText">Your Prefences</h1>
            <p class="generalText">Minimum Light Level: </p>
            <p class="generalText">Maximum Temperature: </p>
            <a href="http://127.0.0.1:5000/editPreferences">Edit</a>
        </div> 

        <div id="flex_body">
            <div id="container_led">
                <h1 class="generalText">Room Lighting</h1>
                <!-- <img id="lightSwitch" src="../static/images/offSwitch.jpg" style="width:100px" onclick="toggleLED()">  -->
                <img id="lightbulb" src="../static/images/lightOff.png" style="width:100px"><br>
                <meter id="lightGauge" value="0" min="0" max="5000" high="4000" low="400"></meter>
                <p id="lightIntensity" class="generalText">Light intensity: 0</p>
                <p id="emailText" class="generalText"></p>
            </div>

            <div id="container_led">
                <h1 class="generalText">Fan Status</h1>
                <img id="fanState" src="../static/images/fanOff.jpg" style="width:300px">
                
            </div>
            <div id="container_led">
                <h1 class="generalText">Room Climate</h1>
                <div class="guage" id="tempGuage"></div> 
                <div class="guage" id="humGuage"></div>
            </div> 

        </div>
        </div>
        




        <script src="{{ url_for('static', filename='gauge_files/raphael-2.1.4.min.js') }}"></script>        
        <script src="{{ url_for('static', filename='gauge_files/justgage.js') }}"></script>
        <script>
            
            var temp, hum;
            window.onload = function(){
                temp = new JustGage({
                id: "tempGuage",
                value: temperature,
                min: 0,
                max: 50,
                title: "Temperature",
                valueFontColor: '#ffffff',
                labelFontColor: '#ffffff',
                symbol: "Â°C"
                });

                hum = new JustGage({
                id: "humGuage",
                value: humidity,
                min: 0,
                max: 100,
                title: "Humidity",
                valueFontColor: '#ffffff',
                labelFontColor: '#ffffff',
                symbol: "%"
                });
                setInterval(getTempResult, 3000);
            }
            
            setInterval(getEmailLightData, 2000);
            
        </script>
    </body>
</html>